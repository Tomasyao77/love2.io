---
title: 区块链商城
date: 2018-03-30 17:27:33
tags:
---
## 区块链定义

> 一句话，区块链是一个存储系统。更细一点，区块链是一个没有管理员，每个节点都拥有全部数据的分布式存储系统。

![image](http://ouq6u283u.bkt.clouddn.com/%E9%80%89%E5%8C%BA_156.png)

## 以太坊

> 以太坊　=　区块链 +　智能合约

**智能合约**是 1990s 年代由**尼克萨博**提出的理念，几乎与互联网同龄。由于缺少可信的执行环境，智能合约并没有被应用到实际产业中，自比特币诞生后，人们认识到比特币的底层技术区块链天生可以为智能合约提供可信的执行环境，以太坊首先看到了区块链和智能合约的契合，发布了白皮书《以太坊：下一代智能合约和去中心化应用平台》，并一直致力于将以太坊打造成最佳智能合约平台，所以**比特币引领区块链，以太坊复活智能合约**。

<!--more-->

## 传统数据库实现区块链

> 区块链能解决问题十分有限，它的数据管理和查询能力还打不到 NoSQL 的水平，更别提 SQL 的复杂应用。

* 数据只能被顺序追加，追加时检查插入上一个数据库快的 hash 值。
* 通过触发器禁止修改数据，执行update 抛出异常
* 通过触发器禁止删除数据，执行delete 语句抛出异常
* 如果是mysql存储引擎可以选择 Archive 更为安全
* 数据读取时使用UDF函数检查，也可以在应用程序中检查。前后hash值不正确，就提示数据有风险。

## 区块链 + mysql

> 充分利用区块链的不可逆性实现产品, 交易, 评价的防伪

* mysql作为关系型数据库存储传统web项目的业务数据
* 利用区块链技术对mysql中的记录做hash运算,形成特定的记录
* 由一定数目的特定记录组成区块
* 按照一定的共识机制判决是否将新区块链接到主链上

## 系统架构

***广义概念图***
![image](http://ouq6u283u.bkt.clouddn.com/qukuailian.png)

***分布式架构图***
![](http://ouq6u283u.bkt.clouddn.com/qukuailianxitongjiagou.png)

![](http://ouq6u283u.bkt.clouddn.com/%E6%9C%AA%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6%20%283%29.png)

## 难点

> * 私链搭建
* 共识机制
* 智能合约
......

## 等级策略

> 加分 = 当前等级 \* 售出率 \* 商品价值点 \* bounce1 - 未售率 \* 商品价值点 \* bounce2




